<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Pynsource Help</title>
</head>
<body>

<h2>What is Pynsource?</h2>
<p><img src="help-images/help01.jpg" /></p>
<p>Import one or more python files and they will be reverse engineered and represented as a UML diagram.&nbsp; Layout the diagram as you like and print it to paper or to pdf.</p>
<p><img src="help-images/pro.jpg" /> The Pro version of Pynsource, released in 2019, substitutes a faster graphics engine which allows for zoom, zoom to fit and drag drop line connection between shapes.&nbsp; Please support the Pro version so that more features can be added e.g. undo, advanced Python parsing, UML line annotations etc.</p>
<h3>Video Tutorial on Youtube now available</h3>
Check out the new <a href="https://youtu.be/FEXeDI18LMs">Youtube video tutorial</a> on basic usage of Pynsource, hopefully I'll be able to make some more videos soon.
<h3>Importing Python files</h3>
<p>Import multiple files by multiple selecting files (hold ctrl and/or shift) in the file open dialog.</p>
<p>You can import repeatedly and incoming classes will be <strong>added</strong> and wired up to existing classes on the workspace.  The positions of existing classes will not be affected by new, incoming UML objects.</p>
<p>The default parsing mode is Python 3 syntax.  To switch to Python 2 syntax mode, toggle the menu item <b>"File / Python 3 mode"</b></p>
<h3>Adding classes</h3>
<p>Whilst Pynsource is mainly a reverse engineering tool, you can add and delete classes and relationships without reference to any Python code at all.
    You can use Pynsource as a general UML class diagram editor.&nbsp;</p>
<h3>Adding Lines</h3>
<p>You can delete or change existing association lines, as well as create new ones.</p>
<p>Drag lines directly between UML shapes. E.g. Drag between a shape's white port to any other shape's white port.</p>
<p>Change the line style through the line's r.click menu or shortcuts, like selecting the line and hitting 'R' which reverses the direction of the line.</p>
<p>Drawing lines between classes using shortcut keys is also possible: To draw lines between classes:</p>
<ol>
<p><img src="help-images/pro.jpg" /> Dragging lines directly between UML shapes is a Pro feature.</p>
<li>Select the first class,</li>
<li>hit 'q',</li>
<li>select the second class,</li>
<li>hit 'a' (association), 'w' (composition) or 'e' (generalisation).</li>
</ol>
<h3>Adding Images</h3>
<p>You can import images but currently, images will not be persisted when you save the diagram.</p>
<p>Images can be resized, and will be printed with your diagram.</p>
<h3>Zooming</h3>
Zooming will be towards the mouse position.</p>
<p>If you have a shape selected, zooming will be towards that shape.</p>
<p>Use</p>
<ul>
<li>CMD + and CMD to zoom in and out.</li>
<li>CMD 0 resets the zoom to normal scale</li>
<li>CMD MouseWheel to zoom in and out.</li>
</ul>
<p><img src="help-images/pro.jpg" /> Zooming is a Pro feature.</p>
<h3>Expanding and contracting the layout</h3>
<p>Use</p>
<ul>
<li>-&gt; (right arrow) to expand the layout spacing</li>
<li>&lt;- (left arrow) to contract.</li>
</ul>
<p>Laying out lots of classes does better with an increased layout spacing, but takes up more room.</p>
<h3>Optimal Layout</h3>
<p>This runs layout several times and chooses the layout with least line crossings and the least shape overlaps.&nbsp; After an 'Optimal' Layout, there may be layout variants that you can access by pressing keys 1, 2 ... 8 in decreasing order of layout perfection.</p>
<p><img src="help-images/pro.jpg" /> Optimal Layout is a Pro feature.</p>
<h3>Colour</h3>
<p><img src="help-images/help-colour.jpg" /></p>
<p>The 'colour sibling subclasses' feature helps use colour to understand the relationships in your uml diagram.</p>
<hr />
<h3>UML as Ascii - View</h3>
<p><img src="help-images/help-ascii.jpg" /></p>
<p>Hit "Ctrl-J" (or Cmd-J on Mac) to toggle between normal UML and Ascii UML - you can thus copy and paste ascii uml text into your source code!</p>
<p>Hold down ALT as you drag select text fragments to select in "block" mode, which allows you to precisely select single classes or areas of your diagram.</p>
<p>Optionally use Java Ascii Versatile Editor <span style="text-decoration: underline;">http://www.jave.de</span> to wire up your ascii uml classes nicely before pasting into your source code or documentation.</p>
<hr />
<h3>PlantUML - View</h3>
<p><img src="help-images/plantuml01.jpg" /></p>
<p>The PlantUML view renders a UML diagram image using the <a target="_blank" href="http://plantuml.com/class-diagram">PlantUML web service</a>&nbsp;which requires an internet connection.</p>
<p>There is a limitation on the size of diagram which this service will render.</p>
<p>There is no ability to select and move shapes.
    You can however switch to the main UML view, where everthing is editable, then switch back to PlantUML view (the UML image will be re-rendered).</p>
<p>Printing, zooming (pro) and saving of images (pro) are also available whilst in PlantUML view.</p>

<h4>Debugging PlantUML server rendering failures</h4>
<p>If you are having problems generating PlantUML diagrams, view the <b>Pynsource log file</b> using the menu 
    <pre>Help / View Log...        
    </pre> which will show the calls to the 
    PlantUML urls and importantly, the internet response codes. A response code of <b>200</b> means OK.
    You can copy and paste the logs to 
    <a target="_blank" href="mailto:abulka@gmail.com?subject=Pynsource support request">support</a>
    if you would like some help diagnosing the issue.</p>
<h4>Running your own PlantUML server</h4>
<p>If you have trouble accessing the internet, or you want faster rendering speed and larger diagrams capacity, consider running your own plantUML server 
    and tell Pynsource to use it. Simply add e.g. the line <pre>PlantUmlServerUrl = http://localhost:8080/plantuml/uml        
    </pre> to your Pynsource config file.
</p>
<p>Another example is <code>PlantUmlServerUrl = http://plantuml.dokku.nas/uml</code> 
    which is the location of my PlantUML server running on my NAS, for example.
</p>
<p>
    The location of your Pynsource config file varies on each operating system. 
    The exact path to the config file can be found by viewing the log file via the menu Help / View Log...
    and look for the entry <i>Pynsource (configobj) config location</i>.  
    For example on Mac the config file is <code>~/Library/Preferences/Pynsource/pynsource.ini</code>
</p>
<h4>To install PlantUML server on Mac:</h4>
First
<pre>
install <a href="https://brew.sh/">Brew</a>
</pre>
If you don't have Java installed
<pre>
brew tap adoptopenjdk/openjdk
brew cask install adoptopenjdk8
</pre>
then
<pre>
brew install maven
git clone https://github.com/plantuml/plantuml-server.git
cd plantuml-server
mvn jetty:run

verify by visiting your local page
http://localhost:8080/plantuml/

You can specify the port at which it runs:
mvn jetty:run -Djetty.port=9999
</pre>

<h4>To install PlantUML server on Linux:</h4>
Install Java then
<pre>
sudo apt install maven
git clone https://github.com/plantuml/plantuml-server.git
cd plantuml-server
mvn jetty:run    
</pre>

<h3>Export to XML</h3>
<p>Pynsource now supports exporting your diagrams to XML in the XGMML format.
    Why would you do this? Its another way to access your UML diagram data in a standardised format. 
    For example you can import the XML into cool apps like Cytoscape which have advanced layout features.</p>
<p>
    XGMML is an open standard node/edge format - see <a href="https://web.archive.org/web/20140328030415/http://cgi5.cs.rpi.edu/research/groups/pb/punin/public_html/XGMML/draft-xgmml.html">specification</a>.
</p>
<p>
    Cytoscape is an open source data visualiser with advanced layouts, see <a href="https://cytoscape.org/">https://cytoscape.org/</a>
</p>
<h4>Instructions:</h4>
<ol>
    <li>
        Export the diagram to an .xml file using <code>File/Export Diagram to XML...</code> or right click on the workspace.
    </li>
    <li>
        Open the Cytoscape app and import the xml file using <code>File/Import/Network from file...</code>.
    </li>
    <li>
        Run one of the many layout algorithms to view the diagram in different ways.  
        Remember to install the (free) yFiles plugin for Cytoscape for more layout options.
    </li>
</ol>
<p><img src="help-images/cytoscape.png"/></p>
<p><i>Example of a Pynsource diagram loaded in Cytoscape.</i></p>

<hr />
<h3>Known Bugs in Mac version</h3>
<ul>
<li>When printing, the default page range in the print dialog box appears as 1-9999. Only the one page will actually be physically printed (thankfully).</li>
<li>"Pure" full-screen on Mac is prevented (on Community Edition only, PRO is OK) due to slower performance, please limit yourself to "regular" maximised mode (hold ALT when pressing the maximise icon).</li>
</ul>
<p>These limitations are due bugs in the underlying wxPython GUI toolkit on Mac.</p>
<h3>Latest News</h3>
<p><img src="help-images/gituml.jpg" /> For an exciting new online version of Pynsource which integrates with Github, please visit 
    <a href="http://gituml.com">GitUML</a> where you can set up a free account. It supports Java and Python.</p>
<h3>Latest Features</h3>
<h4>Full Screen Mode on Mac</h4>
<p><img src="help-images/pro.jpg" /> True full screen mode on Mac is now enabled for Pro users.</p>
<h4>Command Line use</h4>
<p>
You can pass arguments to Pynsource on the command line, 
which reverse engineers and generates a diagram from those Python files.
For example:   
</p>
<pre>
python3 src/pynsource_gui.py FILE1.PY FILE2.PY etc.
e.g.
python3 src/pynsource_gui.py src/app/cmds/l*.py
</pre>
If you are running the binary Pynsource you simply invoke the exe  and then the list of Python files you want to reverse engineer.
In this way, PRO users can take advantage of this feature.
On Mac, the command is a little trickier e.g.
<pre>
/Applications/pynsource.app/Contents/MacOS/Pynsource FILE1.PY FILE2.PY</pre>
<p>Tip: Pynsource currrently assumes that the files to be analysed are Python 3 - this is not yet
configurable, but could be changed if you are running from source code: 
in src/pynsource_gui.py line 379 by passing a 2 instead of a 3.
</p>
</body>
</html>